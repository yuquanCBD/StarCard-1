<!DOCTYPE html>

<!--[if IE 8]> <html lang="en" class="ie8"> <![endif]-->

<!--[if IE 9]> <html lang="en" class="ie9"> <![endif]-->

<!--[if !IE]><!--> <html lang="en"> <!--<![endif]-->

<!-- BEGIN HEAD -->

<head>

	<meta charset="utf-8" />

	<title>wiki信息管理</title>

	<meta content="width=device-width, initial-scale=1.0" name="viewport" />

	<meta content="" name="description" />

	<meta content="" name="author" />

	<!-- BEGIN GLOBAL MANDATORY STYLES -->

	<link href="media/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/bootstrap-responsive.min.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/style-metro.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/style.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/style-responsive.css" rel="stylesheet" type="text/css"/>

	<link href="media/css/default.css" rel="stylesheet" type="text/css" id="style_color"/>

	<link href="media/css/uniform.default.css" rel="stylesheet" type="text/css"/>

	<!-- END GLOBAL MANDATORY STYLES -->

	<!-- BEGIN PAGE LEVEL STYLES -->

	<link rel="stylesheet" type="text/css" href="media/css/select2_metro.css" />

	<link rel="stylesheet" href="media/css/DT_bootstrap.css" />

	<!-- END PAGE LEVEL STYLES -->

	<link rel="shortcut icon" href="media/image/favicon.ico" />

</head>

<!-- END HEAD -->

<!-- BEGIN BODY -->

<body class="page-header-fixed">

	<!-- BEGIN HEADER -->

	<div class="header navbar navbar-inverse navbar-fixed-top">

		<!-- BEGIN TOP NAVIGATION BAR -->

		<div class="navbar-inner">

			<div class="container-fluid">

				<!-- BEGIN LOGO -->

				<a class="brand" href="query">

				<img src="media/image/logo.png" alt="logo" />

				</a>

				<!-- END LOGO -->

				<!-- BEGIN RESPONSIVE MENU TOGGLER -->

				<a href="javascript:;" class="btn-navbar collapsed" data-toggle="collapse" data-target=".nav-collapse">

				<img src="media/image/menu-toggler.png" alt="" />

				</a>          

				<!-- END RESPONSIVE MENU TOGGLER -->            

				<!-- BEGIN TOP NAVIGATION MENU -->              
<!-- -->

				<!-- END TOP NAVIGATION MENU --> 

			</div>

		</div>

		<!-- END TOP NAVIGATION BAR -->

	</div>

	<!-- END HEADER -->

	<!-- BEGIN CONTAINER -->

	<div class="page-container row-fluid">

		<!-- BEGIN SIDEBAR -->

		<div class="page-sidebar nav-collapse collapse">

			<!-- BEGIN SIDEBAR MENU -->        

			
			<ul class="page-sidebar-menu">
				<li class="">

					<a href="javascript:;">

					<i class="icon-table"></i> 

					<span class="title">球星卡管理</span>

					<span class="selected"></span>

					<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li class="">

							<a href="/admin/managerquery">

							 管理员卡片管理</a>

						</li>
						<li class="">

							<a href="/admin/commonquery">

							 普通商家卡片管理</a>

						</li>

						<li class="">

							<a href="/admin/starcardAdd">

							信息添加</a>

						</li>


					</ul>

				</li>

				<li class="">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">人员管理</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li>

							<a href="/webUser/query">人员查询、删除、修改</a>

						</li>

						<li class="">

							<a href="/webUser/add">人员增加</a>

						</li>
						<li class="">

							<a href="/webUser/getmanager">管理员管理</a>

						</li>


					</ul>

				</li>
				<li class="">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">订单管理</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li>
							<a href="/webOrder/query">订单查询、删除、修改</a>
						</li>
						<li>
							<a href="/webOrder/managerquery">管理员用户订单管理</a>
						</li>
						<li>
							<a href="/webOrder/commonquery">普通用户订单管理</a>
						</li>
						<li>
							<a href="/webOrder/getrefund">退款申请管理</a>
						</li>

					</ul>

				</li>
				<li class="active">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">百科管理</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li>
							<a href="/webWiki/add">百科增加</a>
						</li>
						<li>
							<a href="/webWiki/query">百科查询、删除、修改</a>
						</li>
						<li class="active">
							<a href="/webWiki/check">百科审核</a>
						</li>
						<li>
							<a href="/webWiki/lock">百科锁定</a>
						</li>
					</ul>

				</li>
				<li class="">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">新闻管理</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li>
							<a href="/kindeditor/nodejs/newsAdd.html">新闻增加</a>
						</li>
						<li>
							<a href="/kindeditor/nodejs/newsManage.html">新闻查询、删除、修改</a>
						</li>
					</ul>

				</li>
				<li class="">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">消息推送</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li class="">
							<a href="/webNews/message">消息推送</a>
						</li>
						<li class="">
							<a href="/webNews/messagelist">消息管理</a>
						</li>
					</ul>

				</li>
				<li class="">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">广告管理</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li class="">
							<a href="/kindeditor/nodejs/advAdd.html">广告增加</a>
						</li>
						<li class="">
							<a href="/kindeditor/nodejs/advManage.html">广告查询、删除、修改</a>
						</li>
					</ul>

				</li>
				<li class="">

					<a href="javascript:;">

						<i class="icon-table"></i> 

						<span class="title">客服信息</span>

						<!-- <span class="selected"></span> -->

						<span class="arrow open"></span>

					</a>

					<ul class="sub-menu">
						<li class="">
							<a href="/webService/checksv">未处理客服信息</a>
						</li>
						<li class="">
							<a href="/webService/allsv">所有客服信息</a>
						</li>
					</ul>

				</li>


			</ul>
			<!-- END SIDEBAR MENU -->

		</div>

		<!-- END SIDEBAR -->

		<!-- BEGIN PAGE -->

		<div class="page-content">

			<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->

			<div id="portlet-config" class="modal hide">

				<div class="modal-header">

					<button data-dismiss="modal" class="close" type="button"></button>

					<h3>portlet Settings</h3>

				</div>

				<div class="modal-body">

					<p>Here will be a configuration form</p>

				</div>

			</div>

			<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->

			<!-- BEGIN PAGE CONTAINER-->        

			<div class="container-fluid">

				<!-- BEGIN PAGE HEADER-->

				<div class="row-fluid">

					<div class="span12">
						<!-- BEGIN PAGE TITLE & BREADCRUMB-->

						<h3 class="page-title">

							信息查询、删除、添加

						</h3>

						<!-- END PAGE TITLE & BREADCRUMB-->

					</div>

				</div>

				<!-- END PAGE HEADER-->

				<!-- BEGIN PAGE CONTENT-->

				<div id="query" class="row-fluid">

					<div class="span6 responsive" style="width:100%" data-tablet="span12 fix-offset" data-desktop="span6">

						<!-- BEGIN EXAMPLE TABLE PORTLET-->

						<div class="portlet grey">

							<div class="portlet-title">

								<div class="caption"><i class="icon-user"></i>订单信息查询结果</div>

								<div class="actions">

									<!-- <a href="/admin/query" class="btn blue"> 查询球星卡信息</a> -->

								</div>

							</div>

							<div  class="portlet-body">

								<table class="table table-striped table-bordered table-hover" id="sample_2">

									<thead>

										<tr>
											<!-- cardid seller buyer status card_price logistic_price ordertype  -->
											<!--列表中未展示 logistic  logistic_no alipay_id   card_num message  addr_id receive_time-->
											<th class="hidden-480">序号</th>
											<th class="hidden-480">中文名称</th>
											<th class="hidden-480">类别</th>
											<th class="hidden-480">品牌</th>
											
											<th class="hidden-480">价格</th>
											<th class="hidden-480">贡献者</th>
											<th class="hidden-480">状态</th>
											<th class="hidden-480">详情</th>
											<th class="hidden-480">审核通过</th>
											<th calss="hidden-480">审核未通过</th>
										</tr>

									</thead>

									<tbody>

									</tbody>

								</table>
								
							</div>

						</div>

						<!-- END EXAMPLE TABLE PORTLET-->

					</div>

					

				</div>

				<!-- END PAGE CONTENT-->         
				<!-- 详细信息查看-->

				<div id='detail' class="row-fluid" hidden=true>

					<div class="span12">

						<!-- BEGIN SAMPLE FORM PORTLET-->   

						<div class="portlet box blue tabbable">

							<div class="portlet-title">

								<div class="caption">

									<i class="icon-reorder"></i>

									<span class="hidden-480">详细信息查看</span>

								</div>

							</div>

							<div class="portlet-body form">

								<div class="tabbable portlet-tabs">

									<ul class="nav nav-tabs">

										<li><a href="">信息查看</a></li>
									</ul>

									<div class="tab-content">

										<div class="tab-pane active" id="portlet_tab1">

											<!-- BEGIN FORM-->

											<form id='formDetail' action="" enctype="multipart/form-data" method="post" class="form-horizontal">
												<div class="control-group">

													<label class="control-label" >百科id:</label>

													<div class="controls">

														<input disabled id='wikiidD' type="text" class="m-wrap large" name="wikiid" />
													</div>

												</div>
												<div class="control-group">

													<label class="control-label" >百科中文名称:</label>

													<div class="controls">

														<input disabled id='wikinameD' type="text" class="m-wrap large" name="wikiname" />

														<!-- <span class="help-inline">Some hint here</span> -->

													</div>

												</div>
												<div class="control-group">

													<label class="control-label" >百科英文名称:</label>

													<div class="controls">

														<input disabled id='english_nameD' type="text" class="m-wrap large" name="english_name" />
													</div>

												</div>
												<div class="control-group">

													<label class="control-label" >类别:</label>

													<div class="controls">

														<input disabled id='categoryD' type="text" class="m-wrap large" name="category" />
													</div>

												</div>
												<div class="control-group">

													<label class="control-label" >品牌:</label>

													<div class="controls">

														<input disabled id='brandD' type="text" class="m-wrap medium" name="brand" />
													</div>

												</div>
												
												<div class="control-group">

													<label class="control-label">百科描述:</label>

													<div class="controls">

														<textarea disabled="disabled" id="describesD" class="large m-wrap" rows="5" ></textarea>

													</div>

												</div>
											
												<button id="backButton" type="button" class="btn blue" style="margin-left:25%">返回</button>
											</form>

											<!-- END FORM-->  

										</div>

									</div>

								</div>

							</div>

						</div>

						<!-- END SAMPLE FORM PORTLET-->

					</div>

				</div>

				<!-- 详细信息查看-->         

				<!-- ************************************************************** -->
			</div>

			<!-- END PAGE CONTAINER-->

		</div>

		<!-- END PAGE -->

	</div>

	<!-- END CONTAINER -->

	<!-- BEGIN FOOTER -->

	<div id='sss' class="footer">

		<div id='sssss' class="footer-inner">

			2013 &copy; Metronic by keenthemes.

		</div>

		<div class="footer-tools">

			<span class="go-top">

			<i class="icon-angle-up"></i>

			</span>

		</div>

	</div>

	<!-- END FOOTER -->

	<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->

	<!-- BEGIN CORE PLUGINS -->

	<script src="media/js/jquery-1.10.1.min.js" type="text/javascript"></script>

	<script src="media/js/jquery-migrate-1.2.1.min.js" type="text/javascript"></script>

	<!-- IMPORTANT! Load jquery-ui-1.10.1.custom.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->

	<script src="media/js/jquery-ui-1.10.1.custom.min.js" type="text/javascript"></script>      

	<script src="media/js/bootstrap.min.js" type="text/javascript"></script>

	<!--[if lt IE 9]>

	<script src="media/js/excanvas.min.js"></script>

	<script src="media/js/respond.min.js"></script>  

	<![endif]-->   

	<script src="media/js/jquery.slimscroll.min.js" type="text/javascript"></script>

	<script src="media/js/jquery.blockui.min.js" type="text/javascript"></script>  

	<script src="media/js/jquery.cookie.min.js" type="text/javascript"></script>

	<script src="media/js/jquery.uniform.min.js" type="text/javascript" ></script>

	<!-- END CORE PLUGINS -->

	<!-- BEGIN PAGE LEVEL PLUGINS -->

	<script type="text/javascript" src="media/js/select2.min.js"></script>

	<script type="text/javascript" src="media/js/jquery.dataTables.js"></script>

	<script type="text/javascript" src="media/js/DT_bootstrap.js"></script>

	<!-- END PAGE LEVEL PLUGINS -->

	<!-- BEGIN PAGE LEVEL SCRIPTS -->

	<script src="media/js/app.js"></script>

	<script src="media/js/table-managed.js"></script>     

	<script>
		// <!--列表中未展示 english_name series  serial_number rarity describes picture -->
		// 列表中  <wikiname category brand manufacturer price contributor islock>
		jQuery(document).ready(function() {     
			function createTR(obj,index){
				var tr = '<tr class="odd gradeX">'+
					//'<td><input type="checkbox" class="checkboxes" value="1" name="checks"/></td>'+
					'<td>'+index+'</td>'+
					'<td>'+obj.wikiname+'</td>'+
					'<td>'+obj.category+'</td>'+
					'<td>'+obj.brand+'</td>'+
					'<td>'+obj.price+'</td>'+
					'<td>'+obj.contributor+'</td>';
				if(obj.status == -1){
					tr += '<td>审核未通过</td>';
				}
				else if(obj.status == 1){
					tr += '<td>审核已通过</td>';
				}
				else{
					tr += '<td>未处理</td>';
				};
				
				tr += '<td><button wikiid="'+obj.wikiid+'" preid="'+obj.id+'" english_name="'+obj.english_name+'" series="'+obj.series+'" serial_number="'+obj.serial_number+'" rarity="'+obj.rarity+'" describes="'+obj.describes+'" picture="'+obj.picture+'" class="detailButton">详情</button></td>'+
					  '<td><button wikiid="'+obj.wikiid+'" preid="'+obj.id+'" english_name="'+obj.english_name+'" series="'+obj.series+'" serial_number="'+obj.serial_number+'" rarity="'+obj.rarity+'" describes="'+obj.describes+'" picture="'+obj.picture+'" class="checkButton">审核通过</button></td>'+
					  '<td><button wikiid="'+obj.wikiid+'" preid="'+obj.id+'" english_name="'+obj.english_name+'" series="'+obj.series+'" serial_number="'+obj.serial_number+'" rarity="'+obj.rarity+'" describes="'+obj.describes+'" picture="'+obj.picture+'" class="unCheckButton">审核未通过</button></td></tr>';
		
				return tr;
			};
			function PostAjax(url, obj){
				$.ajax({
			   		type : 'POST',
			   		url : url,
			   		data : obj,
			   		dataType : 'json',
			   		cache : false,
			   		success : function(data){
			   			console.log('信息锁定',data);
			   			location.reload();
			   		},
			   		error : function(){
			   			console.log('删除信息失败');
			   		}
		   		}); 
			};
			function updateAjax(url, obj){
				console.log(url);
				console.log(obj);
				$.ajax({
			   		type : 'POST',
			   		url : url,
			   		data : obj,
			   		dataType : 'json',
			   		cache : false,
		   		});
			}
			function query(){
				$.ajax({
			   		type : 'POST',
			   		url : '/webWiki/checkquery',
			   		data : {pageIndex : 0, pageSize : 20},
			   		dataType : 'json',
			   		cache : false,
			   		success : function(data){
			   			var eva = eval(data);
			   			console.log(eva);
			   			$('tbody').empty();
			   			for (var i = 0; i < eva.length; i++) {
			  				var tr = createTR(eva[i],i+1);
			   				$('tbody').append(tr);
			   			};
			   			$("button.detailButton").click(function(e){
			   				$('div#query').attr('hidden',true);
			   				$('div#detail').attr('hidden',false);
			   				var tar = $(e.target);
			   				var tr = tar.parent().parent();
			   				var tds = $(tr).find('td');
			   				var wikiid = tar.attr("wikiid");
			   				var english_name = tar.attr("english_name");
			   				var series = tar.attr("series");
			   				var serial_number = tar.attr("serial_number");
			   				var rarity = tar.attr("rarity");
			   				var describes = tar.attr("describes");
			   				
			   				var picture = tar.attr("picture");
			   				var wikiname = $(tds[1]).text();
			   				var category = $(tds[2]).text();
			   				var brand = $(tds[3]).text();
			   				
			   				var price = $(tds[5]).text();
			   				var contributor = $(tds[6]).text();
			   				
			   				$("input#wikiidD").attr({value:wikiid});
			   				$("input#english_nameD").attr({value:english_name});
			   				//$("input#seriesD").attr({value:series});
			   				//$("input#serial_numberD").attr({value:serial_number});
			   				//$("input#rarityD").attr({value:rarity});
			   				$("#describesD").attr({value:describes});
			   				$("input#wikinameD").attr({value:wikiname});
			   				$("input#categoryD").attr({value:category});
			   				$("input#brandD").attr({value:brand});
			   				
			   			});
			   			$("button.checkButton").click(function(e){
			   				if(confirm('是否审查通过?')){
			   					var cid = $(e.target).attr('wikiid');
			   					var describes = $(e.target).attr('describes');
			   					var id = $(e.target).attr("preid");
			   					console.log(cid);
			   					PostAjax('/webWiki/check',{wikiid:cid, describes:describes, id:id});
			   				}
			   			});
			   			$("button.unCheckButton").click(function(e){
			   				if(confirm('是否确定未通过?')){
			   					var cid = $(e.target).attr('wikiid');
			   					var describes = $(e.target).attr('describes');
			   					var id = $(e.target).attr("preid");
			   					console.log(cid);
			   					PostAjax('/webWiki/uncheck',{wikiid:cid, describes:describes, id:id});
			   				}
			   			});
			   			
			   			App.init();

			   			TableManaged.init();
			   		},
			   		error : function(){
			   			alert('查询信息失败');
			   		}
		   		});    
			}
		 	query();
		 	$("#detailBtn").click(function(){
				$('#checks').each(function(){
					if(this.checked)
						alert($(this).val());
				});
			});
			$("button#backButton").click(function(e){
				$('div#detail').attr('hidden',true);
			   	$('div#query').attr('hidden',false);
			});

		});

	</script>

<script type="text/javascript">  var _gaq = _gaq || [];  _gaq.push(['_setAccount', 'UA-37564768-1']);  _gaq.push(['_setDomainName', 'keenthemes.com']);  _gaq.push(['_setAllowLinker', true]);  _gaq.push(['_trackPageview']);  (function() {    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);  })();</script></body>

<!-- END BODY -->

</html>